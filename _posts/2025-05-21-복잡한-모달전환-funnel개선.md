---
layout: single
title: "ë³µì¡í•œ ëª¨ë‹¬ ì „í™˜ì„ Funnel êµ¬ì¡°ë¡œ ê°œì„ í•˜ê¸°"
categories: React
tag: [React, funnel, ëª¨ë‹¬, ë‹¨ê³„ ì „í™˜, ì „í™˜, step]
sidebar:
  nav: "counts"
---

> ë³¸ ê²Œì‹œë¬¼ì—ì„œ ë“±ì¥í•˜ëŠ” â€˜ê¸¸ë“œâ€™ í‚¤ì›Œë“œëŠ” ì‹¤ì œ ë””ìŠ¤ì½”ë“œì˜ â€˜ì„œë²„â€™ì™€ ë™ì¼í•œ ê°œë…ì…ë‹ˆë‹¤.
> ê°œë°œì‹œ ë°±ì—”ë“œ íŒ€ì›ë“¤ì˜ í˜¼ì„ ì„ ë°©ì§€í•˜ê³ ì **ê¸¸ë“œ(Guild)** ë¡œ ì‚¬ìš©ì¤‘ì„ì„ ê°ì•ˆí•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤ :)

## ğŸ’­Â ë‹¨ê³„ë³„ modal ì „í™˜ ê³ ë¯¼ ê³¼ì •

- ê¸¸ë“œ ìƒì„± ì‹œ `ê¸¸ë“œ ì„ íƒ` ì´í›„ `ê¸¸ë“œ ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆ`ë¡œ ëª¨ë‹¬ì˜ ë‚´ìš©ì´ ë‹¨ê³„ë³„ë¡œ ì „í™˜ë˜ì–´ì•¼ í–ˆìŠµë‹ˆë‹¤.
- ì´ë¥¼ ìœ„í•´ `currentModal` ìƒíƒœë¥¼ ë§Œë“¤ì–´ ë‹¨ê³„ë³„ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒíƒœê°’ì— ë”°ë¼ ë‚˜ëˆ  ë„ìš°ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

```tsx
const [currentModal, setCurrentModal] = useState<CreateGuildStep | null>(null);

useEffect(() => {
  if (currentModal === null) return;

  switch (currentModal) {
    case "initial":
      handleChangeModal(<CreateGuildModal setCurrentModal={setCurrentModal} />);
      break;
    case "customize":
      handleChangeModal(
        <CustomizeGuildModal setCurrentModal={setCurrentModal} />
      );
      break;
  }
}, [currentModal]);
```

- ì²« ë²ˆì§¸ ë‹¨ê³„ì—ì„œ `ë‹¤ìŒ` ë²„íŠ¼ í´ë¦­ ì‹œ **customize**ë¡œ ìƒíƒœë¥¼ ë³€ê²½í•˜ê³ , ë‘ ë²ˆì§¸ ë‹¨ê³„ì—ì„œëŠ” `ë’¤ë¡œê°€ê¸°` ë²„íŠ¼ í´ë¦­ ì‹œ ë‹¤ì‹œ **initial**ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
- ì´ ë°©ì‹ì€ ê°„ë‹¨í•˜ì§€ë§Œ currentModal ê°’ì´ ê°™ìœ¼ë©´ useEffectê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ì§€ ì•Šì•„ **ëª¨ë‹¬ì´ ëœ¨ì§€ ì•ŠëŠ” ë²„ê·¸**ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

```tsx
useEffect(() => {
  if (!modal.basic) {
    setCurrentModal(null);
  }
}, [modal]);
```

- ì´ë¥¼ í†µí•´ ëª¨ë‹¬ì´ ë‹«í ë•Œ currentModalì„ ì´ˆê¸°í™”í•˜ì—¬ ìƒíƒœ ë³€ê²½ì„ ê°ì§€í•˜ê²Œ í–ˆì§€ë§Œ, ì „ë°˜ì ìœ¼ë¡œ **ê´€ë¦¬ í¬ì¸íŠ¸ê°€ ëŠ˜ì–´ë‚˜ê³  íë¦„ì´ ë³µì¡í•´ì¡ŒìŠµë‹ˆë‹¤**.

## ë¬¸ì œì 

- ë‹¨ê³„ê°€ ëŠ˜ì–´ë‚ ìˆ˜ë¡ `useEffect`ê°€ ë³µì¡í•´ì§€ê³  ê´€ë¦¬ê°€ ì–´ë ¤ì›Œì¡ŒìŠµë‹ˆë‹¤.
- ë‹¨ê³„ë³„ ì…ë ¥ê°’ë„ **GuildList**ì—ì„œ ì§ì ‘ ê´€ë¦¬í•˜ê²Œ ë˜ë©´ì„œ ì•„ë˜ì™€ ê°™ì´ **ë¶ˆí•„ìš”í•œ ë§ì€ ìƒíƒœ**ë¥¼ ê°–ê²Œ ë©ë‹ˆë‹¤.

```tsx
// Guild(ì„œë²„) ìƒì„±ì— í•„ìš”í•œ ë°ì´í„°ë“¤
const [guildName, setGuildName] = useState("");
const [guildImage, setGuildImage] = useState<File | null>(null);
const [guildType, setGuildType] = useState<"private" | "public" | null>(null);
```

- ì´ì²˜ëŸ¼ **ì¼ë¶€ ë‹¨ê³„ì—ì„œë§Œ í•„ìš”í•œ ê°’ì¡°ì°¨ë„ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê´€ë¦¬**í•˜ê²Œ ë˜ë©° ì½”ë“œê°€ ë³µì¡í•´ì§€ê³  ì±…ì„ ë¶„ë¦¬ê°€ ëª¨í˜¸í•´ì§‘ë‹ˆë‹¤.
- ì „ì—­ ìƒíƒœë‚˜ Contextë¡œ í•´ê²°í•  ìˆ˜ë„ ìˆìœ¼ë‚˜ ëª¨ë‹¬ì˜ ì¢…ë¥˜ê°€ ë§ì•„ì§ˆìˆ˜ë¡ ìƒíƒœ ê´€ë¦¬ ë²”ìœ„ê°€ ë„“ì–´ì§€ê³  ë””ë²„ê¹…ì´ ì–´ë ¤ì›Œì§€ëŠ” ë¬¸ì œê°€ ìƒê¸¸ ê²ƒì´ë¼ ìƒê°í–ˆìŠµë‹ˆë‹¤.

## Funnel êµ¬ì¡°ë¡œì˜ ì „í™˜

ì´ëŸ¬í•œ ë¬¸ì œì ë“¤ì„ í•´ê²°í•˜ê¸° ìœ„í•´ [toss slash](https://toss.im/slash-23/session-detail/A1-3)ì—ì„œ ì•„ì´ë””ì–´ë¥¼ ì–»ì–´ **ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—†ì´ Funnel êµ¬ì¡°ë¥¼ ì§ì ‘ êµ¬í˜„í•´ ì ìš©**í–ˆìŠµë‹ˆë‹¤.

### **Funnel êµ¬ì¡°ë€?**

- Funnelì€ ì‚¬ìš©ìê°€ ì–´ë–¤ ëª©í‘œ ì§€ì (ex: ê°€ì… ì™„ë£Œ)ì— ë„ë‹¬í•˜ê¸°ê¹Œì§€ **ì—¬ëŸ¬ ë‹¨ê³„ë¥¼ ê±°ì¹˜ëŠ” íë¦„**ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
  ì¼ë°˜ì ìœ¼ë¡œ ë§ˆì¼€íŒ…ì´ë‚˜ ì œí’ˆ ì„¤ê³„ ë“±ì—ì„œ ì‚¬ìš©ë˜ë©°, UIì—ì„œë„ ë‹¨ê³„ë³„ í”Œë¡œìš°ë¥¼ ì œì–´í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.
- í† ìŠ¤ì—ì„œëŠ” ì´ë¥¼ ìœ„í•´ useFunnelì´ë¼ëŠ” í›…ì„ ì‚¬ìš©í•˜ì§€ë§Œ ë³¸ í¬ìŠ¤íŒ…ì—ì„œëŠ” í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  **ì§ì ‘ ì»¤ìŠ¤í…€ í›…**ê³¼ **ì»´í¬ë„ŒíŠ¸**ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

## ì§ì ‘ êµ¬í˜„í•œ Funnel êµ¬ì¡°

```tsx
// ì»¤ìŠ¤í…€ í›…
const useFunnel = <T extends string>({
  defaultStep,
  stepList,
}: UseFunnelProps<T>) => {
  const [currentStep, setCurrentStep] = useState(defaultStep);
  const currentIndex = stepList.indexOf(currentStep);

  const moveToNextStep = () => {
    if (currentIndex < stepList.length - 1) {
      setCurrentStep(stepList[currentIndex + 1]);
    }
  };

  const moveToPrevStep = () => {
    if (currentIndex > 0) {
      setCurrentStep(stepList[currentIndex - 1]);
    }
  };

  return {
    Funnel,
    Step,
    currentStep,
    moveToNextStep,
    moveToPrevStep,
  };
};
```

```tsx
// Funnelê³¼ Step ì»´í¬ë„ŒíŠ¸
const Funnel = <T extends string>({
  children,
  currentStep,
}: FunnelProps<T>) => {
  const targetStep = children.find((step) => step.props.name === currentStep);
  if (!targetStep) {
    throw new Error(
      `${currentStep} ë‹¨ê³„ì— í•´ë‹¹í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.`
    );
  }
  return <>{targetStep}</>;
};

Funnel.Step = function Step<T extends string>({ children }: StepProps<T>) {
  return <>{children}</>;
};
```

### Funnel êµ¬ì¡° ì ìš© ë°©ì‹

1. Guild ìƒì„± í”Œë¡œìš°ë¥¼ **í•˜ë‚˜ì˜ CreateGuildModalContent** ì»´í¬ë„ŒíŠ¸ë¡œ ë¬¶ìŠµë‹ˆë‹¤.
2. ë‚´ë¶€ì—ì„œ `useFunnel` í›…ìœ¼ë¡œ ê° ë‹¨ê³„ì˜ ì½˜í…ì¸ ë¥¼ ì „í™˜í•©ë‹ˆë‹¤.

```tsx
const { Funnel, currentStep, moveToNextStep, moveToPrevStep } = useFunnel({
  defaultStep: "ì„œë²„ê³µê°œì—¬ë¶€",
  stepList: ["ì„œë²„ê³µê°œì—¬ë¶€", "ì„œë²„ì»¤ìŠ¤í…€"],
});

return (
  <Funnel currentStep={currentStep}>
    <Funnel.Step name="ì„œë²„ê³µê°œì—¬ë¶€">
      <CreateGuildModal onNext={moveToNextStep} />
    </Funnel.Step>
    <Funnel.Step name="ì„œë²„ì»¤ìŠ¤í…€">
      <CustomizeGuildModal onPrev={moveToPrevStep} />
    </Funnel.Step>
  </Funnel>
);
```

- ê° ìŠ¤í… ì»´í¬ë„ŒíŠ¸ëŠ” ë” ì´ìƒ ìƒíƒœë¥¼ ì§ì ‘ ê´€ë¦¬í•  í•„ìš”ê°€ ì—†ì–´ì§€ê³  **onNext, onPrevë§Œ ë„˜ê²¨ë°›ì•„ ë™ì‘**í•˜ë©´ ë©ë‹ˆë‹¤.
- **GuildList**ì—ì„œëŠ” ë‹¨ìˆœíˆ ì•„ë˜ì™€ ê°™ì´ í•˜ë‚˜ì˜ ëª¨ë‹¬ë§Œ ì—´ë©´ ë©ë‹ˆë‹¤

```tsx
const handleChangeModal = () => {
  openModal("basic", <CreateGuildModalContent />);
};
```

## ê²°ê³¼

- ë‹¨ê³„ë³„ ìƒíƒœì™€ ë Œë”ë§ ë¶„ê¸°ë¥¼ í•œ ê³³ì— ëª¨ìœ¼ë©´ì„œ **ê´€ë¦¬ í¬ì¸íŠ¸ê°€ ì¤„ì–´ë“¤ê³ ** ì½”ë“œë¥¼ ì§ê´€ì ìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
- ìƒíƒœê°€ í¼ì ¸ ìˆë˜ ê¸°ì¡´ êµ¬ì¡°ë³´ë‹¤ ë‹¨ê³„ë³„ íë¦„ì´ ëª…í™•í•´ì§€ê³  ìœ ì§€ë³´ìˆ˜ë„ ì‰¬ì›Œì¡ŒìŠµë‹ˆë‹¤.
- íŠ¹íˆ ëª¨ë‹¬ ì•ˆì—ì„œ ì‚¬ìš©í•˜ëŠ” **ì…ë ¥ê°’ ìƒíƒœ**ë¥¼ ê° ìŠ¤í… ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œë§Œ ê´€ë¦¬í•  ìˆ˜ ìˆì–´ **ë²”ìœ„ê°€ ëª…í™•í•´ì¡ŒìŠµë‹ˆë‹¤.**

## **ğŸ“ ì°¸ê³ **

> Funnel ê°œë… ë° ì„¤ê³„ ì•„ì´ë””ì–´ëŠ”
> <Toss Slash 23 ì„¸ì…˜: ì‚¬ìš©ìì˜ íë¦„ì„ Funnelë¡œ ê´€ë¦¬í•˜ê¸°>ì—ì„œ ì°¸ê³ í–ˆìŠµë‹ˆë‹¤.
